SPECIFICATION Spec

CONSTANTS
    Servers = {s1, s2, s3}
    MaxTerm = 3
    MaxLogLength = 10
    HeartbeatTimeout = 5
    ElectionTimeout = 10
    MaxClientRequests = 5
    \* CORE constants (required since ConsensusProtocol EXTENDS CORE)
    MAX_TX = 3
    MAX_LSN = 20
    MAX_PAGES = 10
    PAGE_SIZE = 1024

INVARIANTS
    TypeInvariant
    AtMostOneLeaderPerTerm
    CommittedEntriesDurable
    LogMatching
    LeaderCompleteness
    StateMachineSafety
    TermMonotonic
    ElectionSafety

PROPERTIES
    EventuallyElectLeader
    CommittedEventuallyApplied

CONSTRAINT
    currentTime < 50

\* Symmetry reduction on server IDs (Raft paper optimization)
SYMMETRY
    Permutations(Servers)

CHECK_DEADLOCK FALSE
