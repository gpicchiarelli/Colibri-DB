SPECIFICATION Spec_TOAST

CONSTANTS
  MAX_TX = 3
  MAX_LSN = 20
  MAX_PAGES = 10
  MAX_INLINE_SIZE = 2048
  TOAST_PAGE_SIZE = 8192
  MAX_TOAST_CHUNKS = 10
  CompressionAlgorithms = {none, lz4, zstd, pglz}

INVARIANTS
  TypeOK_TOAST
  Inv_TOAST_MainTableSize
  Inv_TOAST_PointerValidity
  Inv_TOAST_ChunkSequence
  Inv_TOAST_CompressionRatio
  Inv_TOAST_DeadNotReferenced

PROPERTIES
  Prop_TOAST_FetchCompletion

CONSTRAINT
  Cardinality(DOMAIN mainTable) <= 10
  /\ Cardinality(DOMAIN toastTable) <= 20
  /\ nextToastId <= 30

