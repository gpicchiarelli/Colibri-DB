---
layout: default
title: Specifiche TLA+ di Colibrì DB
description: Collegamento tra moduli Swift e specifiche TLA+ ufficiali del progetto Colibrì DB.
---

<section class="hero hero--sub">
  <div class="shell hero__inner hero__inner--compact">
    <span class="hero__eyebrow">Codice &amp; modello</span>
    <h1 class="hero__title">Specifiche TLA+ allineate al runtime Swift</h1>
    <p class="hero__lede">
      Ogni sottosistema del core Swift cita la propria specifica TLA+. Le proprietà dichiarate nei file <code>spec/*.tla</code>
      sono riflesse nei commenti e nelle invarianti implementate in <code>Sources/ColibriCore</code>.
    </p>
  </div>
</section>

<section class="section">
  <div class="shell">
    <header class="section__header">
      <span class="section__eyebrow">Mappa delle specifiche</span>
      <h2 class="section__title">Dove il modello formale incontra il codice</h2>
      <p class="section__lede">
        I file Swift riportano l'origine TLA+ nel commento d'intestazione. Qui sotto trovi le corrispondenze principali
        tra implementazione e modello.
      </p>
    </header>
    <div class="module-grid">
      <article class="module-card">
        <h3>Storage &amp; WAL</h3>
        <p><code>WAL/FileWAL.swift</code> e <code>Storage/HeapTable.swift</code> derivano da <code>spec/WAL.tla</code> e <code>spec/HeapTable.tla</code>, garantendo log-before-data e slot coherence.</p>
        <div class="module-tags">
          <span class="module-tag">Durabilità</span>
          <span class="module-tag module-tag--accent">ARIES</span>
        </div>
      </article>
      <article class="module-card">
        <h3>Buffer Pool</h3>
        <p><code>BufferPool/BufferPool.swift</code> segue <code>spec/BufferPool.tla</code>, includendo invarianti su pin-count, eviction clock e flushing coordinato con il WAL.</p>
        <div class="module-tags">
          <span class="module-tag">Clock-sweep</span>
          <span class="module-tag">Dirty set</span>
        </div>
      </article>
      <article class="module-card">
        <h3>Lock &amp; MVCC</h3>
        <p><code>Transaction/LockManager.swift</code> e <code>MVCC/MVCCManager.swift</code> rispettano <code>spec/LockManager.tla</code> e <code>spec/MVCC.tla</code>: fairness, assenza di deadlock e snapshot isolation.</p>
        <div class="module-tags">
          <span class="module-tag">Snapshot</span>
          <span class="module-tag">Fairness</span>
        </div>
      </article>
      <article class="module-card">
        <h3>Query Engine</h3>
        <p><code>Query/QueryExecutor.swift</code> implementa gli operatori descritti in <code>spec/QueryExecutor.tla</code>, mentre <code>Planner/QueryPlanner.swift</code> segue <code>spec/QueryPlanner.tla</code>.</p>
        <div class="module-tags">
          <span class="module-tag">Join hash</span>
          <span class="module-tag">Aggregazioni</span>
        </div>
      </article>
      <article class="module-card">
        <h3>Consensus &amp; Replica</h3>
        <p><code>Consensus/RaftConsensusManager.swift</code> e <code>Replication/ReplicationManager.swift</code> sono derivati da <code>spec/ConsensusProtocol.tla</code> e <code>spec/Replication.tla</code>, assicurando log matching e leader completeness.</p>
        <div class="module-tags">
          <span class="module-tag">Raft</span>
          <span class="module-tag">Replica</span>
        </div>
      </article>
      <article class="module-card">
        <h3>Commit distribuito</h3>
        <p><code>TwoPhaseCommit/TwoPhaseCommitManager.swift</code> e <code>DistributedTx/TwoPhaseCommit.swift</code> implementano <code>spec/TwoPhaseCommit.tla</code>, coprendo atomicità e terminazione.</p>
        <div class="module-tags">
          <span class="module-tag">2PC</span>
          <span class="module-tag module-tag--accent">Atomicità</span>
        </div>
      </article>
      <article class="module-card">
        <h3>Recovery</h3>
        <p><code>Recovery/ARIESRecovery.swift</code> e <code>Recovery/ARIESRecoveryManager.swift</code> derivano da <code>spec/ARIES.tla</code>; completano analisi, redo e undo idempotenti.</p>
        <div class="module-tags">
          <span class="module-tag">REDO</span>
          <span class="module-tag">UNDO</span>
        </div>
      </article>
      <article class="module-card">
        <h3>Security</h3>
        <p><code>Security/Authentication.swift</code> e <code>Security/RolesPermissions.swift</code> si appoggiano a <code>spec/Authentication.tla</code> e <code>spec/Authorization.tla</code> per la gestione di utenti, sessioni e ruoli.</p>
        <div class="module-tags">
          <span class="module-tag">RBAC</span>
          <span class="module-tag">Crypto</span>
        </div>
      </article>
    </div>
  </div>
</section>

<section class="section section--muted">
  <div class="shell">
    <header class="section__header">
      <span class="section__eyebrow">Invarianti rilevanti</span>
      <h2 class="section__title">Esempi di proprietà verificate</h2>
      <p class="section__lede">
        Queste proprietà sono citate direttamente nel codice Swift sotto forma di commenti o TODO formali, facilitando la
        verifica manuale durante lo sviluppo.
      </p>
    </header>
    <div class="highlight-grid">
      <div class="highlight">
        <strong>WAL</strong>
        <p><code>FileWAL.swift</code> richiama <em>Log-Before-Data</em>, <em>Durability</em> e <em>Idempotent Recovery</em> dal modulo TLA.</p>
      </div>
      <div class="highlight">
        <strong>Lock Manager</strong>
        <p><code>LockManager.swift</code> annota <em>No Deadlock</em>, <em>Fairness</em> e <em>No Starvation</em> in linea con <code>LockManager.tla</code>.</p>
      </div>
      <div class="highlight">
        <strong>MVCC</strong>
        <p><code>MVCCManager.swift</code> documenta <em>Snapshot Isolation</em> e <em>Version Chain Consistency</em> come invarianti fondamentali.</p>
      </div>
      <div class="highlight">
        <strong>Consensus</strong>
        <p><code>RaftConsensusManager.swift</code> cita <em>Leader Completeness</em>, <em>Election Safety</em> e <em>Log Matching</em> da <code>ConsensusProtocol.tla</code>.</p>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="shell">
    <header class="section__header section__header--center">
      <span class="section__eyebrow">Come consultarle</span>
      <h2 class="section__title">Integra le specifiche nel tuo flusso di lavoro</h2>
    </header>
    <div class="highlight-grid">
      <div class="highlight">
        <strong>1. Apri il modello</strong>
        <p>Trovi i file in <code>spec/</code>. Ogni coppia <code>.tla</code>/<code>.cfg</code> è pronta per TLC.</p>
      </div>
      <div class="highlight">
        <strong>2. Segui il riferimento</strong>
        <p>Nel corrispondente file Swift, cerca il commento “Based on: spec/&lt;Modulo&gt;.tla” per capire come viene applicato.</p>
      </div>
      <div class="highlight">
        <strong>3. Esegui TLC</strong>
        <p>Usa i file <code>.cfg</code> inclusi per riprodurre i check di safety e liveness sul tuo ambiente.</p>
      </div>
    </div>
  </div>
</section>
