---
layout: default
title: Architettura - Colibrì DB
description: Architettura modulare e design interno di Colibrì DB
---

<!-- Hero Section -->
<section class="hero hero-sub">
  <div class="container">
    <div class="hero-content">
      <div class="hero-badge">
        <span class="badge-icon">🏗️</span>
        <span>Architettura del Sistema</span>
      </div>
      <h1 class="hero-title">Design Interno</h1>
      <p class="hero-description">
        Colibrì DB utilizza un'architettura modulare con componenti indipendenti e verificabili. 
        Ogni layer ha responsabilità specifiche e interfacce ben definite.
      </p>
    </div>
  </div>
</section>

<!-- Architecture Overview -->
<section class="architecture">
  <div class="container">
    <div class="section-header">
      <h2>Panoramica Architetturale</h2>
      <p>Un sistema a 4 layer con separazione netta delle responsabilità</p>
    </div>
    
    <div class="architecture-diagram">
      <div class="arch-layer">
        <div class="layer-header">
          <div class="layer-icon">🌐</div>
          <h3>Distributed Layer</h3>
          <span class="layer-badge">Consenso & Replica</span>
        </div>
        <div class="layer-description">
          <p>Gestisce la distribuzione, il consenso e la replica dei dati attraverso il cluster.</p>
        </div>
        <div class="layer-components">
          <div class="component">
            <div class="component-icon">🤝</div>
            <div class="component-name">Raft Consensus</div>
            <div class="component-desc">Elezione leader e log matching</div>
          </div>
          <div class="component">
            <div class="component-icon">🔄</div>
            <div class="component-name">Two-Phase Commit</div>
            <div class="component-desc">Transazioni distribuite atomiche</div>
          </div>
          <div class="component">
            <div class="component-icon">📊</div>
            <div class="component-name">Sharding Manager</div>
            <div class="component-desc">Partizionamento automatico</div>
          </div>
          <div class="component">
            <div class="component-icon">📡</div>
            <div class="component-name">Replication</div>
            <div class="component-desc">Replica sincrona/asincrona</div>
          </div>
        </div>
      </div>

      <div class="arch-layer">
        <div class="layer-header">
          <div class="layer-icon">⚙️</div>
          <h3>Query Layer</h3>
          <span class="layer-badge">SQL & Ottimizzazione</span>
        </div>
        <div class="layer-description">
          <p>Processa le query SQL, le ottimizza e le esegue utilizzando operatori fisici efficienti.</p>
        </div>
        <div class="layer-components">
          <div class="component">
            <div class="component-icon">📝</div>
            <div class="component-name">SQL Parser</div>
            <div class="component-desc">Parsing e validazione SQL</div>
          </div>
          <div class="component">
            <div class="component-icon">🧠</div>
            <div class="component-name">Query Planner</div>
            <div class="component-desc">Pianificazione logica</div>
          </div>
          <div class="component">
            <div class="component-icon">⚡</div>
            <div class="component-name">Query Executor</div>
            <div class="component-desc">Esecuzione operatori fisici</div>
          </div>
          <div class="component">
            <div class="component-icon">🎯</div>
            <div class="component-name">Optimizer</div>
            <div class="component-desc">Ottimizzazione cost-based</div>
          </div>
        </div>
      </div>

      <div class="arch-layer">
        <div class="layer-header">
          <div class="layer-icon">🔒</div>
          <h3>Transaction Layer</h3>
          <span class="layer-badge">ACID & Concorrenza</span>
        </div>
        <div class="layer-description">
          <p>Garantisce le proprietà ACID e gestisce la concorrenza attraverso MVCC e lock management.</p>
        </div>
        <div class="layer-components">
          <div class="component">
            <div class="component-icon">📋</div>
            <div class="component-name">Transaction Manager</div>
            <div class="component-desc">Lifecycle transazioni</div>
          </div>
          <div class="component">
            <div class="component-icon">🔐</div>
            <div class="component-name">Lock Manager</div>
            <div class="component-desc">Gestione lock e deadlock</div>
          </div>
          <div class="component">
            <div class="component-icon">📸</div>
            <div class="component-name">MVCC Manager</div>
            <div class="component-desc">Snapshot isolation</div>
          </div>
          <div class="component">
            <div class="component-icon">🔄</div>
            <div class="component-name">Recovery Manager</div>
            <div class="component-desc">ARIES recovery</div>
          </div>
        </div>
      </div>

      <div class="arch-layer">
        <div class="layer-header">
          <div class="layer-icon">💾</div>
          <h3>Storage Layer</h3>
          <span class="layer-badge">Persistenza & Indici</span>
        </div>
        <div class="layer-description">
          <p>Gestisce la persistenza dei dati, il buffering in memoria e l'indicizzazione per accessi veloci.</p>
        </div>
        <div class="layer-components">
          <div class="component">
            <div class="component-icon">🧠</div>
            <div class="component-name">Buffer Pool</div>
            <div class="component-desc">Cache intelligente</div>
          </div>
          <div class="component">
            <div class="component-icon">📁</div>
            <div class="component-name">Heap Storage</div>
            <div class="component-desc">Storage slotted pages</div>
          </div>
          <div class="component">
            <div class="component-icon">📝</div>
            <div class="component-name">WAL</div>
            <div class="component-desc">Write-ahead logging</div>
          </div>
          <div class="component">
            <div class="component-icon">🔍</div>
            <div class="component-name">Index Manager</div>
            <div class="component-desc">B-Tree, Hash, Bitmap</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Data Flow -->
<section class="data-flow">
  <div class="container">
    <div class="section-header">
      <h2>Flusso dei Dati</h2>
      <p>Come una query attraversa i vari layer del sistema</p>
    </div>
    
    <div class="flow-diagram">
      <div class="flow-step">
        <div class="step-number">1</div>
        <div class="step-content">
          <h4>SQL Input</h4>
          <p>Query SQL ricevuta dal client</p>
        </div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-step">
        <div class="step-number">2</div>
        <div class="step-content">
          <h4>Parsing</h4>
          <p>Analisi sintattica e semantica</p>
        </div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-step">
        <div class="step-number">3</div>
        <div class="step-content">
          <h4>Planning</h4>
          <p>Generazione piano di esecuzione</p>
        </div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-step">
        <div class="step-number">4</div>
        <div class="step-content">
          <h4>Optimization</h4>
          <p>Ottimizzazione cost-based</p>
        </div>
      </div>
      <div class="flow-arrow">→</div>
      <div class="flow-step">
        <div class="step-number">5</div>
        <div class="step-content">
          <h4>Execution</h4>
          <p>Esecuzione operatori fisici</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Performance Characteristics -->
<section class="performance">
  <div class="container">
    <div class="section-header">
      <h2>Caratteristiche di Performance</h2>
      <p>Ottimizzazioni e algoritmi per massime prestazioni</p>
    </div>
    
    <div class="performance-grid">
      <div class="perf-card">
        <div class="perf-icon">⚡</div>
        <h3>Buffer Pool</h3>
        <p>Algoritmo clock-sweep per gestione efficiente della memoria con pin-count e dirty set tracking.</p>
        <ul>
          <li>LRU eviction policy</li>
          <li>Dirty page tracking</li>
          <li>Prefetching intelligente</li>
          <li>Memory pressure handling</li>
        </ul>
      </div>
      
      <div class="perf-card">
        <div class="perf-icon">📝</div>
        <h3>WAL Optimization</h3>
        <p>Write-ahead logging ottimizzato con group commit e checkpointing efficiente.</p>
        <ul>
          <li>Group commit batching</li>
          <li>Incremental checkpointing</li>
          <li>Log compression</li>
          <li>Parallel recovery</li>
        </ul>
      </div>
      
      <div class="perf-card">
        <div class="perf-icon">🔍</div>
        <h3>Query Optimization</h3>
        <p>Ottimizzatore cost-based con statistiche runtime e feedback loop per query performance.</p>
        <ul>
          <li>Cost-based optimization</li>
          <li>Runtime statistics</li>
          <li>Adaptive query plans</li>
          <li>Index selection</li>
        </ul>
      </div>
      
      <div class="perf-card">
        <div class="perf-icon">🔒</div>
        <h3>Concurrency Control</h3>
        <p>MVCC con snapshot isolation per concorrenza senza blocchi e performance ottimali.</p>
        <ul>
          <li>Snapshot isolation</li>
          <li>Version chain optimization</li>
          <li>Garbage collection</li>
          <li>Lock-free reads</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- Scalability -->
<section class="scalability">
  <div class="container">
    <div class="section-header">
      <h2>Scalabilità e Distribuzione</h2>
      <p>Architettura progettata per crescere da single-node a cluster enterprise</p>
    </div>
    
    <div class="scalability-content">
      <div class="scalability-text">
        <h3>Sharding Automatico</h3>
        <p>Il sistema partiziona automaticamente i dati basandosi su chiavi di sharding configurabili, garantendo distribuzione uniforme e performance lineari.</p>
        
        <h3>Consenso Raft</h3>
        <p>Implementazione completa del protocollo Raft per elezione leader, log replication e gestione dei failure in modo deterministico.</p>
        
        <h3>Query Distribuite</h3>
        <p>Esecuzione federata delle query che attraversa multiple shard, con merge intelligente dei risultati e ottimizzazione del network traffic.</p>
      </div>
      
      <div class="scalability-visual">
        <div class="cluster-diagram">
          <div class="node leader">
            <div class="node-icon">👑</div>
            <div class="node-label">Leader</div>
          </div>
          <div class="node follower">
            <div class="node-icon">📡</div>
            <div class="node-label">Follower</div>
          </div>
          <div class="node follower">
            <div class="node-icon">📡</div>
            <div class="node-label">Follower</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
.hero-sub {
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  padding: var(--space-20) 0;
  text-align: center;
}

.layer-badge {
  background: var(--accent);
  color: white;
  padding: var(--space-1) var(--space-3);
  border-radius: var(--border-radius);
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.layer-description {
  padding: var(--space-4) var(--space-6);
  background: var(--gray-50);
  border-bottom: 1px solid var(--gray-200);
}

.layer-description p {
  margin: 0;
  color: var(--gray-600);
}

.component {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: var(--space-4);
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--border-radius);
  transition: var(--transition);
}

.component:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  border-color: var(--primary);
}

.component-icon {
  font-size: 2rem;
  margin-bottom: var(--space-2);
}

.component-name {
  font-weight: 600;
  color: var(--gray-900);
  margin-bottom: var(--space-1);
}

.component-desc {
  font-size: 0.875rem;
  color: var(--gray-600);
}

.data-flow {
  padding: var(--space-24) 0;
  background: white;
}

.flow-diagram {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-4);
  flex-wrap: wrap;
  max-width: 1000px;
  margin: 0 auto;
}

.flow-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  min-width: 150px;
}

.step-number {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 3rem;
  height: 3rem;
  background: var(--primary);
  color: white;
  border-radius: 50%;
  font-weight: bold;
  font-size: 1.25rem;
  margin-bottom: var(--space-3);
}

.step-content h4 {
  margin-bottom: var(--space-2);
  color: var(--gray-900);
}

.step-content p {
  margin: 0;
  color: var(--gray-600);
  font-size: 0.875rem;
}

.flow-arrow {
  font-size: 2rem;
  color: var(--primary);
  font-weight: bold;
}

.performance {
  padding: var(--space-24) 0;
  background: var(--gray-50);
}

.performance-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--space-8);
}

.perf-card {
  padding: var(--space-8);
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--shadow);
  transition: var(--transition);
}

.perf-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-xl);
  border-color: var(--primary);
}

.perf-icon {
  font-size: 3rem;
  margin-bottom: var(--space-4);
}

.perf-card h3 {
  margin-bottom: var(--space-4);
  color: var(--gray-900);
}

.perf-card p {
  margin-bottom: var(--space-6);
  color: var(--gray-600);
}

.perf-card ul {
  list-style: none;
}

.perf-card li {
  padding: var(--space-2) 0;
  color: var(--gray-600);
  position: relative;
  padding-left: var(--space-6);
}

.perf-card li::before {
  content: "•";
  position: absolute;
  left: 0;
  color: var(--primary);
  font-weight: bold;
}

.scalability {
  padding: var(--space-24) 0;
  background: white;
}

.scalability-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-16);
  align-items: center;
}

.scalability h3 {
  margin-bottom: var(--space-4);
  color: var(--gray-900);
}

.scalability p {
  margin-bottom: var(--space-6);
  color: var(--gray-600);
}

.cluster-diagram {
  display: flex;
  justify-content: center;
  gap: var(--space-6);
  flex-wrap: wrap;
}

.node {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--space-6);
  background: var(--gray-50);
  border: 2px solid var(--gray-200);
  border-radius: var(--border-radius-lg);
  transition: var(--transition);
}

.node:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.node.leader {
  border-color: var(--primary);
  background: rgba(37, 99, 235, 0.05);
}

.node-icon {
  font-size: 2rem;
  margin-bottom: var(--space-2);
}

.node-label {
  font-weight: 600;
  color: var(--gray-700);
}

@media (max-width: 768px) {
  .scalability-content {
    grid-template-columns: 1fr;
    gap: var(--space-8);
  }
  
  .flow-diagram {
    flex-direction: column;
  }
  
  .flow-arrow {
    transform: rotate(90deg);
  }
}
</style>